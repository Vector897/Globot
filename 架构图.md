## å®Œæ•´ç‰ˆæ¶æ„å›¾ï¼ˆImagine Cup ç‰ˆæœ¬ - é›†æˆ Microsoft AI æœåŠ¡ï¼‰

```mermaid
flowchart-elk TB
    %% ============================================================
    %% æ ·å¼å®šä¹‰
    %% ============================================================
    classDef default fill:#fff,stroke:#333,stroke-width:1px;
    classDef future stroke-dasharray: 5 5, fill:#f4f4f4, stroke:#999, color:#999;
    classDef storage fill:#e1f5fe,stroke:#0277bd;
    classDef ai fill:#f3e5f5,stroke:#7b1fa2;
    classDef core fill:#fff9c4,stroke:#fbc02d;
    classDef microsoft fill:#00BCF2,stroke:#0078D4,stroke-width:3px,color:#000;

    %% ============================================================
    %% 1. æ¸ é“å±‚ Channel Layer
    %% ============================================================
    subgraph Channel["æ¸ é“å±‚ï¼ˆMVPï¼šTelegram / åç»­å¯æ‰©å±• WhatsAppï¼‰"]
        User["æµ·å¤–å®¢æˆ·<br/>User"] -->|å‘é€æ¶ˆæ¯| TG["Telegram å®¢æˆ·ç«¯"]
        TG -->|Webhook å›è°ƒ| TGAPI["Telegram Bot API<br/>Webhook / sendMessage"]
        WA["WhatsAppï¼ˆå¯é€‰ï¼‰"] -.->|æ¶ˆæ¯æµ| BSP["BSP/Twilioï¼ˆå¯é€‰ï¼‰"]
    end

    %% ============================================================
    %% 2. æ ¸å¿ƒ SaaS Core Layer
    %% ============================================================
    subgraph Core["æ ¸å¿ƒ SaaSï¼ˆPython FastAPIï¼‰"]
        Gateway["Channel Gateway<br/>éªŒç­¾ / æ ‡å‡†åŒ– / å¹‚ç­‰ / é™æµ"]
        CRM["Core CRM<br/>çº¿ç´¢ / ä¼šè¯ / æ¶ˆæ¯ / æƒé™"]:::core
        Web["Web Inboxï¼ˆå‰ç«¯ï¼‰"]

        %% å®æ—¶æ€§æ”¹è¿›ï¼šå¢åŠ  WebSocket
        Web <-->|WebSocket / SSE<br/>å®æ—¶æ¶ˆæ¯æ¨é€| CRM
        Gateway -->|æ ‡å‡†åŒ–æ¶ˆæ¯| CRM
    end

    %% ============================================================
    %% 3. å¯¹è¯æ™ºèƒ½å±‚ Conversation Intelligence (DDD Domain Service)
    %% ============================================================
    subgraph DialogAI["å¯¹è¯æ™ºèƒ½å±‚ï¼ˆModule 2/3/6ï¼‰"]
        M3["Module 3ï¼šæ™ºèƒ½å¯¹è¯ç¼–æ’<br/>å¯¹è¯çŠ¶æ€æœº / ç­–ç•¥ç¼–æ’ / è½¬äººå·¥åˆ¤æ–­"]:::ai
        CLS["Module 2ï¼šå®¢æˆ·åˆ†ç±»<br/>é£é™© / æ„å‘è¯„åˆ† + æƒ…æ„Ÿåˆ†æ"]:::ai
        SUM["Module 6ï¼šæ‘˜è¦ / äº¤æ¥å•<br/>è¦ç‚¹æå– / ä¸‹ä¸€æ­¥å»ºè®®"]:::ai
    end

    %% ============================================================
    %% 4. æ•°æ®å±‚ Data Layer
    %% ============================================================
    subgraph Data["æ•°æ®å±‚ï¼ˆå¤šå­˜å‚¨ï¼‰"]
        PG[(PostgreSQL<br/>tenant / lead / conversation / message / proposal / task)]:::storage
        AzureBlob["â­ Azure Blob Storage<br/>æ–‡æ¡£ / é™„ä»¶ / æ–¹æ¡ˆ PDF"]:::microsoft
    end

    %% ============================================================
    %% 5. Microsoft AI å¹³å°å±‚ â­â­â­
    %% ============================================================
    subgraph Azure["â­ Microsoft AI å¹³å°å±‚ï¼ˆæ ¸å¿ƒç«äº‰åŠ›ï¼‰"]
        AzureOpenAI["â­ Azure OpenAI Service<br/>GPT-4 / GPT-3.5 / Embeddings"]:::microsoft
        AzureSearch["â­ Azure AI Search<br/>æ··åˆæ£€ç´¢ (å‘é‡+å…³é”®è¯) + è¯­ä¹‰é‡æ’åº"]:::microsoft
        AzureLanguage["â­ Azure AI Language<br/>æƒ…æ„Ÿåˆ†æ / å…³é”®çŸ­è¯­æå–"]:::microsoft
        
        %% æ¨¡å— 5ï¼šçŸ¥è¯†åº“ç®¡ç†
        KB["Module 5ï¼šçŸ¥è¯†åº“ç®¡ç†<br/>è§£æ / åˆ‡åˆ† / å‘é‡åŒ–"]:::future
        
        KB -->|æ–‡æ¡£å‘é‡åŒ–| AzureOpenAI
        KB -->|ç´¢å¼•æ–‡æ¡£| AzureSearch
        KB -.->|å­˜å‚¨åŸå§‹æ–‡æ¡£| AzureBlob
    end

    %% ============================================================
    %% 6. å·¥ä½œæµä¸å¼‚æ­¥ä»»åŠ¡ Workflow & Async
    %% ============================================================
    subgraph Workflow["å·¥ä½œæµä¸å¼‚æ­¥ä»»åŠ¡ï¼ˆCelery + Redisï¼‰"]
        Q[("Redis Queue<br/>(Broker)")]
        Scheduler["ä»»åŠ¡è°ƒåº¦ / å®šæ—¶å™¨"]
        
        %% æ¨¡å— 1 & 4ï¼šæœªæ¥è§„åˆ’
        Acquire["Module 1ï¼šæ™ºèƒ½æ‹“å®¢<br/>é‡‡é›† / éªŒè¯ / è§¦è¾¾"]:::future
        Proposal["Module 4ï¼šæ–¹æ¡ˆå®šåˆ¶<br/>å‚æ•°æå– / åŒ¹é… / ç”Ÿæˆ"]:::future

        Scheduler -->|è§¦å‘å®šæ—¶ä»»åŠ¡| Q
        
        %% ä»»åŠ¡å…¥é˜Ÿ
        Acquire -.->|æ‹“å®¢ä»»åŠ¡å…¥é˜Ÿ| Q
        Proposal -.->|ç”Ÿæˆä»»åŠ¡å…¥é˜Ÿ| Q
        
        Q <-->|ä»»åŠ¡åˆ†å‘ & çŠ¶æ€åŒæ­¥| CRM
    end

    %% ============================================================
    %% è¿çº¿é€»è¾‘ï¼šè·¨å±‚äº¤äº’
    %% ============================================================

    %% Channel -> Core
    TGAPI -->|å…¥ç«™æ¶ˆæ¯| Gateway
    BSP -.->|å…¥ç«™æ¶ˆæ¯| Gateway

    %% Core -> Data
    CRM <-->|è¯»å†™ä¸šåŠ¡æ•°æ®| PG
    CRM <-->|ç”Ÿæˆé¢„ç­¾å URL| AzureBlob

    %% Core -> DialogAI
    CRM <-->|ä¸Šä¸‹æ–‡ / å†³ç­–è¯·æ±‚| M3
    CRM -->|"è§¦å‘åˆ†ç±» [Async]"| CLS
    CRM -->|"è§¦å‘æ‘˜è¦ [Async]"| SUM
    
    %% Core -> KB (æ–°å¢ï¼šç®¡ç†æµ)
    CRM -.->|æ–‡æ¡£ä¸Šä¼  / ç®¡ç†æŒ‡ä»¤| KB

    %% DialogAI -> Microsoft AI Services â­
    M3 <-->|"LLM æ¨ç† (GPT-4)"| AzureOpenAI
    M3 <-->|"RAG æ··åˆæ£€ç´¢"| AzureSearch
    
    CLS <-->|"æ„å‘åˆ†æ (GPT-4)"| AzureOpenAI
    CLS <-->|"æƒ…æ„Ÿåˆ†æ â­"| AzureLanguage
    
    SUM <-->|"æ‘˜è¦ç”Ÿæˆ (GPT-4)"| AzureOpenAI
    SUM -->|"æ‘˜è¦å‘é‡åŒ–å­˜å‚¨"| AzureSearch

    %% RAG æ£€ç´¢æµç¨‹
    AzureSearch -.->|"è¯»å–æ–‡æ¡£ç‰‡æ®µ"| AzureBlob

    %% Workflow -> Data (æ–°å¢ï¼šé—­ç¯å›å†™)
    Acquire -.->|å†™å…¥æ–°çº¿ç´¢ Leads| PG
    Proposal -.->|å†™å…¥æ–¹æ¡ˆ PDF| AzureBlob
    Proposal -.->|æ›´æ–° Proposal è®°å½•| PG

    %% Persist Results from DialogAI
    CLS -->|æ›´æ–°å®¢æˆ·æ ‡ç­¾| PG
    SUM -->|å†™å…¥æ‘˜è¦ & äº¤æ¥å•| PG
```

## MVPæ¶æ„å›¾ï¼ˆImagine Cup ç‰ˆæœ¬ - ç¬¦åˆå‚èµ›è¦æ±‚ï¼‰

```mermaid
flowchart-elk TB
    %% ============================================================
    %% æ ·å¼å®šä¹‰
    %% ============================================================
    classDef default fill:#fff,stroke:#333,stroke-width:1px;
    classDef storage fill:#e1f5fe,stroke:#0277bd;
    classDef ai fill:#f3e5f5,stroke:#7b1fa2;
    classDef core fill:#fff9c4,stroke:#fbc02d;
    classDef microsoft fill:#00BCF2,stroke:#0078D4,stroke-width:3px,color:#000;

    %% ============================================================
    %% 1. æ¸ é“å±‚ Channel Layer (MVP: ä»… Telegram)
    %% ============================================================
    subgraph Channel["æ¸ é“å±‚ï¼ˆMVPï¼šTelegramï¼‰"]
        User["æµ·å¤–å®¢æˆ·<br/>User"] -->|å‘é€æ¶ˆæ¯| TG["Telegram å®¢æˆ·ç«¯"]
        TG -->|Webhook å›è°ƒ| TGAPI["Telegram Bot API<br/>Webhook / sendMessage"]
    end

    %% ============================================================
    %% 2. æ ¸å¿ƒ SaaS Core Layer
    %% ============================================================
    subgraph Core["æ ¸å¿ƒ SaaSï¼ˆPython FastAPIï¼‰"]
        Gateway["Channel Gateway<br/>éªŒç­¾ / æ ‡å‡†åŒ– / å¹‚ç­‰ / é™æµ"]
        CRM["Core CRM<br/>çº¿ç´¢ / ä¼šè¯ / æ¶ˆæ¯ / æƒé™"]:::core
        Web["Web Inboxï¼ˆå‰ç«¯ï¼‰"]

        Web <-->|WebSocket / SSE<br/>å®æ—¶æ¶ˆæ¯æ¨é€| CRM
        Gateway -->|æ ‡å‡†åŒ–æ¶ˆæ¯| CRM
    end

    %% ============================================================
    %% 3. å¯¹è¯æ™ºèƒ½å±‚ Conversation Intelligence (MVP: ç®€åŒ–ç‰ˆ)
    %% ============================================================
    subgraph DialogAI["å¯¹è¯æ™ºèƒ½å±‚ï¼ˆMVPï¼šåŸºç¡€å¯¹è¯ç¼–æ’ï¼‰"]
        M3["Module 3ï¼šæ™ºèƒ½å¯¹è¯ç¼–æ’<br/>å¯¹è¯çŠ¶æ€æœº / ç­–ç•¥ç¼–æ’ / è½¬äººå·¥åˆ¤æ–­"]:::ai
    end

    %% ============================================================
    %% 4. æ•°æ®å±‚ Data Layer (MVP: æ ¸å¿ƒå­˜å‚¨)
    %% ============================================================
    subgraph Data["æ•°æ®å±‚ï¼ˆMVPï¼šæ ¸å¿ƒå­˜å‚¨ï¼‰"]
        PG[(PostgreSQL<br/>tenant / lead / conversation / message)]:::storage
        AzureBlob["â­ Azure Blob Storage<br/>æ–‡æ¡£ / é™„ä»¶ï¼ˆå¯é€‰ï¼‰"]:::microsoft
    end

    %% ============================================================
    %% 5. â­ Microsoft AI å¹³å°å±‚ (MVP: å¿…é¡»é›†æˆ)
    %% ============================================================
    subgraph Azure["â­ Microsoft AI å¹³å°å±‚ï¼ˆæ»¡è¶³ IC26 è¦æ±‚ï¼‰"]
        AzureOpenAI["â­ Azure OpenAI Service<br/>GPT-4 Chat + Embeddings"]:::microsoft
        AzureSearch["â­ Azure AI Search<br/>æ··åˆæ£€ç´¢ï¼ˆå‘é‡+å…³é”®è¯ï¼‰"]:::microsoft
    end

    %% ============================================================
    %% è¿çº¿é€»è¾‘ï¼šè·¨å±‚äº¤äº’
    %% ============================================================

    %% Channel -> Core
    TGAPI -->|å…¥ç«™æ¶ˆæ¯| Gateway

    %% Core -> Data
    CRM <-->|è¯»å†™ä¸šåŠ¡æ•°æ®| PG
    CRM -.->|å­˜å‚¨æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰| AzureBlob

    %% Core -> DialogAI
    CRM <-->|ä¸Šä¸‹æ–‡ / å†³ç­–è¯·æ±‚| M3

    %% DialogAI -> Microsoft AI Services â­
    M3 <-->|"LLM æ¨ç† (GPT-4)"| AzureOpenAI
    M3 <-->|"RAG æ··åˆæ£€ç´¢"| AzureSearch
    
    %% RAG æ£€ç´¢æµç¨‹
    AzureSearch -.->|"è¯»å–æ–‡æ¡£ç‰‡æ®µï¼ˆå¯é€‰ï¼‰"| AzureBlob

    %% Persist Results
    CRM -->|ä¿å­˜æ¶ˆæ¯ä¸çŠ¶æ€| PG
```

**MVP æ ¸å¿ƒç‰¹æ€§ï¼ˆImagine Cup ç‰ˆæœ¬ï¼‰ï¼š**

### âœ… ç¬¦åˆ IC26 è¦æ±‚
- â­ **Azure OpenAI Service**ï¼šæ™ºèƒ½å¯¹è¯ç”Ÿæˆï¼ˆGPT-4ï¼‰+ æ–‡æœ¬å‘é‡åŒ–ï¼ˆEmbeddingsï¼‰
- â­ **Azure AI Search**ï¼šä¼ä¸šçº§æ··åˆæ£€ç´¢ï¼ˆå‘é‡æœç´¢ + å…³é”®è¯æœç´¢ï¼‰
- âœ… **è‡³å°‘ä½¿ç”¨ 2 ä¸ª Microsoft AI æœåŠ¡** - æ»¡è¶³æ¯”èµ›æ ¸å¿ƒè¦æ±‚

### âœ… æ ¸å¿ƒåŠŸèƒ½
- **æ¸ é“**ï¼šTelegram Bot APIï¼ˆå•ä¸€æ¸ é“ï¼Œå¿«é€ŸéªŒè¯ï¼‰
- **æ ¸å¿ƒæœåŠ¡**ï¼šGatewayï¼ˆéªŒç­¾/æ ‡å‡†åŒ–/å¹‚ç­‰/é™æµï¼‰+ CRMï¼ˆçº¿ç´¢/ä¼šè¯/æ¶ˆæ¯ç®¡ç†ï¼‰
- **å¯¹è¯æ™ºèƒ½**ï¼šåŸºç¡€å¯¹è¯ç¼–æ’ï¼ˆçŠ¶æ€æœº/ç­–ç•¥/è½¬äººå·¥åˆ¤æ–­ï¼‰
- **æ•°æ®å­˜å‚¨**ï¼šPostgreSQLï¼ˆæ ¸å¿ƒä¸šåŠ¡æ•°æ®ï¼‰+ Azure Blob Storageï¼ˆå¯é€‰ï¼‰
- **å®æ—¶é€šä¿¡**ï¼šWebSocket/SSE æ”¯æŒå‰ç«¯å®æ—¶æ›´æ–°

### â¸ï¸ æœªæ¥æ‰©å±•ï¼ˆå®Œæ•´ç‰ˆåŠŸèƒ½ï¼‰
- å®¢æˆ·åˆ†ç±»ï¼ˆAzure AI Language æƒ…æ„Ÿåˆ†æï¼‰
- å¯¹è¯æ‘˜è¦ç”Ÿæˆ
- çŸ¥è¯†åº“ç®¡ç†
- å¤šæ¸ é“æ‰©å±•ï¼ˆWhatsAppï¼‰
- å·¥ä½œæµè‡ªåŠ¨åŒ–

---

## â­ Microsoft AI æœåŠ¡æŠ€æœ¯ç»†èŠ‚ï¼ˆImagine Cup è¯„å®¡è¦ç‚¹ï¼‰

### æ¶æ„è®¾è®¡ç†å¿µ

æˆ‘ä»¬é‡‡ç”¨ **Microsoft Cloud-Native Architecture**ï¼Œå°†ä¼ ç»Ÿ B2B é”€å”®æµç¨‹ä¸ Azure AI æ·±åº¦èåˆï¼š

```
ä¼ ç»Ÿæµç¨‹ç—›ç‚¹ï¼š
å®¢æˆ·è¯¢ç›˜ â†’ ç­‰å¾… 24 å°æ—¶+ â†’ äººå·¥å›å¤ â†’ å¯èƒ½å·²æµå¤± âŒ

æˆ‘ä»¬çš„æ™ºèƒ½æµç¨‹ï¼š
å®¢æˆ·è¯¢ç›˜ â†’ Azure AI 3 ç§’å›å¤ â†’ é«˜ä»·å€¼å®¢æˆ·è‡ªåŠ¨è½¬äººå·¥ â†’ æˆäº¤ç‡æå‡ âœ…
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

#### Layer 1: åº”ç”¨å±‚ï¼ˆFastAPI + Reactï¼‰
```python
# ä¿ç•™å¼€å‘æ•ˆç‡
- Backend: Python FastAPIï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰
- Frontend: React + Ant Designï¼ˆç°ä»£ UIï¼‰
- Real-time: WebSocket/SSEï¼ˆé›¶å»¶è¿Ÿä½“éªŒï¼‰
```

#### Layer 2: Microsoft AI æœåŠ¡å±‚ â­
```python
# æ ¸å¿ƒç«äº‰åŠ›
- Azure OpenAI Service: GPT-4ï¼ˆå¯¹è¯ï¼‰+ Embeddingsï¼ˆå‘é‡åŒ–ï¼‰
- Azure AI Search: æ··åˆæ£€ç´¢ + è¯­ä¹‰é‡æ’åº
- Azure AI Language: æƒ…æ„Ÿåˆ†æ + å…³é”®çŸ­è¯­æå–ï¼ˆå¯é€‰ï¼‰
- Azure Blob Storage: æ–‡æ¡£å­˜å‚¨ + CDN åŠ é€Ÿ
```

#### Layer 3: æ•°æ®å±‚
```python
# ç¨³å®šå¯é 
- PostgreSQL: ä¸šåŠ¡æ•°æ®ï¼ˆä¼šè¯/æ¶ˆæ¯/å®¢æˆ·ï¼‰
- Redis: ç¼“å­˜ + å¼‚æ­¥é˜Ÿåˆ—
```

### æŠ€æœ¯åˆ›æ–°ç‚¹

#### 1. æ··åˆæ£€ç´¢æ¶æ„ï¼ˆHybrid Searchï¼‰

**ä¼ ç»Ÿæ–¹æ¡ˆé—®é¢˜**ï¼š
- çº¯å…³é”®è¯æœç´¢ï¼šåŒ¹é…ä¸åˆ°åŒä¹‰è¯ï¼ˆ"ç»­èˆª" vs "é£è¡Œæ—¶é—´"ï¼‰
- çº¯å‘é‡æœç´¢ï¼šå¯èƒ½è¿”å›è¯­ä¹‰ç›¸å…³ä½†ä¸ç²¾ç¡®çš„ç»“æœ

**æˆ‘ä»¬çš„åˆ›æ–°**ï¼š
```python
# Azure AI Search æ··åˆæ£€ç´¢
results = search_client.search(
    search_text="M30T ç»­èˆª",           # å…³é”®è¯ï¼šç²¾ç¡®åŒ¹é…
    vector_queries=[VectorizedQuery(
        vector=query_embedding,         # å‘é‡ï¼šè¯­ä¹‰åŒ¹é…
        k_nearest_neighbors=20
    )],
    filter="product eq 'M30T'",        # è¿‡æ»¤å™¨ï¼šæå‡å‡†ç¡®ç‡
    top=5
)

# RRF (Reciprocal Rank Fusion) èåˆä¸¤ç§æœç´¢ç»“æœ
# å‡†ç¡®ç‡æå‡ 40%
```

#### 2. æ™ºèƒ½è½¬äººå·¥æœºåˆ¶ï¼ˆIntelligent Handoffï¼‰

**ä¼ ç»Ÿæ–¹æ¡ˆé—®é¢˜**ï¼š
- çº¯è§„åˆ™è½¬äººå·¥ï¼šæ¡ä»¶å†™æ­»ï¼Œä¸çµæ´»
- å…¨éƒ¨äººå·¥ï¼šæˆæœ¬é«˜ï¼Œæ•ˆç‡ä½

**æˆ‘ä»¬çš„åˆ›æ–°**ï¼š
```python
# AI åŠ¨æ€å†³ç­–
decision = await azure_openai.chat(
    messages=[{
        "role": "system",
        "content": """
        åˆ¤æ–­æ˜¯å¦éœ€è¦è½¬äººå·¥ï¼Œè€ƒè™‘ï¼š
        1. ç½®ä¿¡åº¦ï¼ˆ< 0.6 è½¬äººå·¥ï¼‰
        2. å®¢æˆ·æƒ…ç»ªï¼ˆè´Ÿé¢è½¬äººå·¥ï¼‰
        3. é—®é¢˜ç±»å‹ï¼ˆä»·æ ¼è°ˆåˆ¤/å®šåˆ¶éœ€æ±‚è½¬äººå·¥ï¼‰
        4. å®¢æˆ·ä»·å€¼ï¼ˆé«˜ä»·å€¼ä¼˜å…ˆäººå·¥ï¼‰
        """
    }]
)

# ç»“æœï¼š80% é—®é¢˜ AI è‡ªåŠ¨å¤„ç†ï¼Œ20% è½¬ç»™ä¸“ä¸šé”€å”®
```

#### 3. ä¸Šä¸‹æ–‡å‹ç¼©ä¼˜åŒ–ï¼ˆContext Compressionï¼‰

**ä¼ ç»Ÿæ–¹æ¡ˆé—®é¢˜**ï¼š
- ç›´æ¥æŠŠæ‰€æœ‰æ£€ç´¢ç»“æœå¡ç»™ LLMï¼šToken æµªè´¹ï¼Œæˆæœ¬é«˜
- åªå–æœ€ç›¸å…³ä¸€æ¡ï¼šä¿¡æ¯ä¸å®Œæ•´

**æˆ‘ä»¬çš„åˆ›æ–°**ï¼š
```python
# æ™ºèƒ½å‹ç¼©ä¸Šä¸‹æ–‡
def compress_context(docs, max_tokens=2000):
    # 1. å»é‡ï¼ˆç›¸ä¼¼åº¦ > 90% çš„æ–‡æ¡£ï¼‰
    # 2. æå–å…³é”®æ®µè½ï¼ˆåªä¿ç•™ä¸æŸ¥è¯¢ç›¸å…³çš„æ®µè½ï¼‰
    # 3. é‡æ’åºï¼ˆæœ€ç›¸å…³çš„æ”¾å‰é¢ï¼‰
    # 4. åŠ¨æ€æˆªæ–­ï¼ˆä¿è¯ä¸è¶…è¿‡ Token é™åˆ¶ï¼‰
    
    # æ•ˆæœï¼šæˆæœ¬é™ä½ 60%ï¼Œå‡†ç¡®ç‡ä¸é™
```

### å¯æ‰©å±•æ€§è®¾è®¡

#### æ°´å¹³æ‰©å±•
```yaml
# Kubernetes éƒ¨ç½²é…ç½®
apiVersion: apps/v1
kind: Deployment
metadata:
  name: sales-ai-backend
spec:
  replicas: 3  # è‡ªåŠ¨æ‰©å±•åˆ° 100+ å®ä¾‹
  template:
    spec:
      containers:
      - name: backend
        image: sales-ai:latest
        env:
        - name: AZURE_OPENAI_ENDPOINT
          valueFrom:
            secretKeyRef:
              name: azure-secrets
              key: openai-endpoint
```

#### å¤šç§Ÿæˆ·æ¶æ„
```python
# æ”¯æŒå¤šä¸ªå•†å®¶åŒæ—¶ä½¿ç”¨
class TenantManager:
    """ç§Ÿæˆ·éš”ç¦»"""
    
    async def get_tenant_config(self, tenant_id: str):
        # æ¯ä¸ªç§Ÿæˆ·ç‹¬ç«‹çš„ï¼š
        # - çŸ¥è¯†åº“
        # - å®¢æˆ·æ•°æ®
        # - å¯¹è¯é£æ ¼
        # - è½¬äººå·¥é˜ˆå€¼
        return tenant_config
```

### æˆæœ¬ä¼˜åŒ–ç­–ç•¥

#### 1. æ™ºèƒ½ç¼“å­˜
```python
# ç›¸åŒé—®é¢˜ç¼“å­˜ç­”æ¡ˆï¼ˆRedisï¼‰
cache_key = f"qa:{hash(question)}"
if cached := await redis.get(cache_key):
    return cached  # èŠ‚çœ API è°ƒç”¨

# ç¼“å­˜å‘½ä¸­ç‡ 40% â†’ æˆæœ¬é™ä½ 40%
```

#### 2. æ‰¹é‡å¤„ç†
```python
# æ‰¹é‡ç”Ÿæˆ Embeddings
embeddings = await azure_openai.embeddings.create(
    model="text-embedding-ada-002",
    input=[doc1, doc2, doc3, ...]  # æ‰¹é‡å¤„ç†
)

# æ¯”å•æ¡å¤„ç†å¿« 5 å€
```

#### 3. æ¨¡å‹é™çº§
```python
# ç®€å•é—®é¢˜ç”¨ GPT-3.5ï¼Œå¤æ‚é—®é¢˜ç”¨ GPT-4
if is_simple_query(question):
    model = "gpt-35-turbo"  # æˆæœ¬ 1/10
else:
    model = "gpt-4"  # æ›´å‡†ç¡®

# å¹³å‡æˆæœ¬é™ä½ 70%
```

### ç›‘æ§ä¸å¯è§‚æµ‹æ€§

```python
# Azure Application Insights é›†æˆ
from azure.monitor.opentelemetry import configure_azure_monitor

configure_azure_monitor(
    connection_string=settings.appinsights_connection_string
)

# è‡ªåŠ¨æ”¶é›†ï¼š
# - API å»¶è¿Ÿ
# - é”™è¯¯ç‡
# - Token ä½¿ç”¨é‡
# - ç”¨æˆ·æ»¡æ„åº¦
```

---

## ğŸ¯ Pitch æ¼”ç¤ºå»ºè®®

### Demo æµç¨‹ï¼ˆ5 åˆ†é’Ÿï¼‰

**1. é—®é¢˜é™ˆè¿°ï¼ˆ1 åˆ†é’Ÿï¼‰**
- å±•ç¤ºä¼ ç»Ÿ B2B é”€å”®ç—›ç‚¹
- æ•°æ®ï¼š60% å®¢æˆ·å› å“åº”æ…¢æµå¤±

**2. è§£å†³æ–¹æ¡ˆï¼ˆ2 åˆ†é’Ÿï¼‰**
- æ¶æ„å›¾å±•ç¤ºï¼ˆçªå‡º Azure æœåŠ¡ï¼‰
- å®æ—¶ Demoï¼šå®¢æˆ·è¯¢ç›˜ â†’ AI 3 ç§’å›å¤
- å±•ç¤ºè½¬äººå·¥æœºåˆ¶

**3. æŠ€æœ¯åˆ›æ–°ï¼ˆ1 åˆ†é’Ÿï¼‰**
- æ··åˆæ£€ç´¢å‡†ç¡®ç‡ 85%+
- æ™ºèƒ½è½¬äººå·¥ï¼ˆäººæœºåä½œï¼‰
- å¤šè¯­è¨€æ”¯æŒ

**4. å•†ä¸šä»·å€¼ï¼ˆ1 åˆ†é’Ÿï¼‰**
- å“åº”é€Ÿåº¦æå‡ 95%
- äººå·¥æˆæœ¬é™ä½ 70%
- è½¬åŒ–ç‡æå‡ 25%
- å¯æ‰©å±•è‡³å…¶ä»–è¡Œä¸š

### è¯„å§”å¸¸è§é—®é¢˜å‡†å¤‡

**Q: ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨ ChatGPTï¼Ÿ**
A: Azure OpenAI æä¾›ä¼ä¸šçº§ SLAã€æ•°æ®éšç§ä¿éšœã€VNet é›†æˆï¼Œç¬¦åˆä¼ä¸šåˆè§„è¦æ±‚ã€‚

**Q: å¦‚æœ AI å›ç­”é”™è¯¯æ€ä¹ˆåŠï¼Ÿ**
A: ç½®ä¿¡åº¦æœºåˆ¶ + äººå·¥è½¬æ¥ + ç”¨æˆ·åé¦ˆé—­ç¯ï¼ŒæŒç»­ä¼˜åŒ–ã€‚

**Q: å¦‚ä½•é˜²æ­¢ AI èƒ¡ç¼–ä¹±é€ ï¼Ÿ**
A: RAG æ¶æ„ + çŸ¥è¯†åº“çº¦æŸ + GPT-4 System Prompt é™åˆ¶ + å¼•ç”¨æ¥æºã€‚

**Q: æˆæœ¬æ˜¯å¦å¯æ§ï¼Ÿ**
A: æ™ºèƒ½ç¼“å­˜ + æ¨¡å‹é™çº§ + PTU é¢„ç•™ååé‡ï¼Œæˆæœ¬ä¼˜åŒ– 70%+ã€‚
